# otus_linux_pro_hw_19


1) Создан свой кастомный образ nginx на базе alpine. После запуска nginx должен отдавать кастомную страницу (достаточно изменить дефолтную страницу nginx).

2) Определена разница между контейнером и образом, написан вывод.
Написан ответ на вопрос: Можно ли в контейнере собрать ядро?

3) Собранный образ запушин в docker hub и дана ссылку на репозиторий.

4) Задание со звездочкой
Написать Docker-compose для приложения Redmine, с использованием опции build.
5) Добавить в базовый образ redmine любую кастомную тему оформления.
Убедиться что после сборки новая тема доступна в настройках.
6) Настроить вольюмы, для сохранения всей необходимой информации



1. создаем докерфайл, меняем дефолтную страницу и конфиг в образе
$ nano Dockerfile

FROM alpine
RUN apk update && apk upgrade 
RUN apk add nginx openrc nano
COPY index.html /usr/share/nginx/html/
COPY default.conf /etc/nginx/http.d/
EXPOSE 9000
CMD ["nginx","-g","daemon off;"]


билдим образ

$ docker build -t my_img:v1 .

запускаем контейнер

$ docker run -d -p 9000:80 my_img:v1

проверка работоспособности

$ curl 127.0.0.1:9000
<HEAD> THIS IS TEST</HEAD>
<center>hello world from my nginx!</center>





2. разница между контейнером и образом:
образ - основа для создания контейнера, файл содержащий в себе все необходимые зависимости для работы кода и сам код
контейнер - это функционирующий экземпляр образа, который для своей работы использует ресурсы компьютера. Из одного образа можно создать несколько контейнеров. Аналогия: чертеж и деталь

вопрос: Можно ли в контейнере собрать ядро?
ответ: можно, при использовании соответствующего образа. т.к. внутрь контейнера можно импортировать любые файлы и контейнер - по сути изолированное окружение, которое пользуется ресурсами ОС

3. запушим образ в докерхаб

$ docker login
$ docker push vasilichru/otus:alpine_nginx
The push refers to repository [docker.io/vasilichru/otus]
b84b397db1be: Pushed 
9d3510c74980: Pushed 
060fad0356b7: Pushed 
f6a6e98e19db: Pushed 
02f2bcb26af5: Mounted from clamav/clamav 
alpine_nginx: digest: sha256:540cdaad19bf33ecc802b1f0d70430d685f6cf84de6a2e90a9d3b2ae7676f359 size: 1364


